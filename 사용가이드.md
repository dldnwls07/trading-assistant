# 트레이딩 어시스턴트 - 사용 가이드 📖

## 🎯 이 프로그램은 무엇인가요?

**트레이딩뷰, 토스증권 등 어떤 프로그램 위에서도 동작하는 AI 주식 분석 보조 도구**입니다.
- 직접 매매를 하지 않고, **매수/매도 조언만 제공**합니다.
- 티커(종목 코드)를 복사하면 자동으로 분석합니다.

---

## 🚀 빠른 시작 (3단계)

### 1단계: 오버레이 실행
터미널에서 아래 명령어를 입력하세요:
```bash
python src/ui/overlay.py
```

작은 창이 화면 위에 뜹니다 (항상 최상위로 표시됨):
```
┌─────────────────────┐
│   대기 중...        │
│   --                │
│   점수: --          │
│ 티커를 복사하세요   │
└─────────────────────┘
```

### 2단계: 종목 복사
- 트레이딩뷰, 토스증권, 웹사이트 등 **어디서든** 종목 티커를 드래그하여 복사 (`Ctrl+C`)
- 예시: `AAPL`, `TSLA`, `NVDA`

### 3단계: 결과 확인
오버레이 창이 자동으로 업데이트됩니다:
```
┌─────────────────────┐
│   AAPL              │
│   관망 (HOLD) 🟡    │
│   점수: 58.0        │
│ 과매수; 골든크로스  │
└─────────────────────┘
```

**신호 의미:**
- 🔴 **강력 매수 (85점 이상)**: 매우 긍정적
- 🟠 **매수 (70~84점)**: 긍정적
- 🟡 **관망 (31~69점)**: 중립
- 🔵 **매도 (16~30점)**: 부정적
- ⚫ **강력 매도 (15점 이하)**: 매우 부정적

---

## 📁 프로젝트 구조

```
Trading_asist/
├── src/                      # 메인 소스코드
│   ├── data/                 # 데이터 수집 및 저장
│   │   ├── collector.py      # yfinance로 시세 수집
│   │   ├── parser.py         # 재무제표 파싱
│   │   └── storage.py        # SQLite DB 관리
│   ├── agents/               # 분석 엔진
│   │   └── analyst.py        # 기술적/기본적 분석 로직
│   └── ui/                   # 사용자 인터페이스
│       └── overlay.py        # 오버레이 위젯 (메인 실행 파일)
├── data/                     # 로컬 데이터 캐시 (CSV)
├── config/                   # 설정 파일
├── .env                      # API 키 (절대 공유 금지!)
├── requirements.txt          # Python 패키지 목록
└── trading_assistant.db      # SQLite 데이터베이스
```

---

## 🔍 분석 로직 설명

### 기술적 분석 (60% 가중치)
1. **RSI (상대강도지수)**
   - 30 이하: 과매도 → 매수 신호
   - 70 이상: 과매수 → 매도 신호

2. **MACD (이동평균수렴확산)**
   - MACD > Signal: 골든크로스 → 매수 신호
   - MACD < Signal: 데드크로스 → 매도 신호

3. **이동평균선 (SMA 20일)**
   - 현재가 > 이평선: 상승 추세
   - 현재가 < 이평선: 하락 추세

### 기본적 분석 (40% 가중치)
1. **매출 성장률**: 전년 대비 10% 이상 성장 시 가점
2. **순이익**: 흑자 전환 시 가점
3. **EPS 성장**: 주당순이익 증가 시 가점

---

## ⚠️ 보안 점검 결과

### ✅ 안전한 부분
- Python 코드에 API 키 하드코딩 **없음**
- `.gitignore`에 `.env` 등록되어 GitHub 업로드 방지됨
- 환경변수 사용 (`.env` 파일에서 로드)

### 🚨 **즉시 조치 필요**
1. **`.env` 파일에 실제 API 키가 노출되어 있습니다!**
   - Alpaca API Key: `PK3XQAYQFG3AIIVGTT5Z...`
   - 이 키를 **즉시 재발급**하세요: https://alpaca.markets/
   
2. **조치 방법:**
   ```bash
   # 1. Alpaca 대시보드에서 기존 키 삭제
   # 2. 새 키 발급
   # 3. .env 파일 업데이트
   ```

3. **GitHub에 이미 올라갔다면:**
   - 즉시 키를 재발급하고
   - Git 히스토리에서 제거: `git filter-repo` 사용

### ⚡ 개선 권장사항
1. **DB 파일명 하드코딩 제거**
   - `src/ui/overlay.py` 50번째 줄: `"trading_assistant.db"` → 환경변수로 변경
   
2. **상대 경로 사용**
   - 현재는 대부분 상대 경로를 사용하고 있어 좋습니다.

---

## 🛠️ 문제 해결

### "ModuleNotFoundError" 발생 시
```bash
pip install -r requirements.txt
```

### 오버레이가 안 뜨는 경우
- Python 버전 확인: `python --version` (3.10 이상 필요)
- tkinter 설치 확인 (보통 기본 포함)

### 한글이 깨지는 경우
- 터미널 출력은 깨질 수 있으나, **GUI 창에서는 정상 표시**됩니다.
- Windows에서 "맑은 고딕" 폰트를 사용합니다.

---

## 📝 다음 단계 (선택사항)

1. **알림 기능 추가**: 특정 조건 만족 시 이메일/텔레그램 알림
2. **OCR 기능**: 클립보드 대신 화면 캡처로 티커 인식
3. **한국 주식 지원**: 네이버 금융 API 연동
4. **백테스팅**: 과거 데이터로 전략 검증

---

**중요**: 이 프로그램은 **투자 조언이 아닙니다**. 모든 투자 결정은 본인의 책임입니다.
